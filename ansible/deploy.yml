---
- name: DÃ©ploiement de l'application Symfony
  hosts: local
  become: false

  tasks:
    - name: Copier le code Symfony localement
      synchronize:
        src: ../
        dest: /opt/crm-symfony/
        recursive: yes
        delete: yes

    - name: Copier le fichier docker-compose
      copy:
        src: ../docker-compose.yml
        dest: /opt/crm-symfony/docker-compose.yml

    - name: Lancer le docker-compose
      shell: docker compose -f /opt/crm-symfony/docker-compose.yml up -d --build

